package com.lyy.dao;

import java.util.Iterator;
import java.util.List;

import javax.annotation.Resource;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import com.lyy.pojo.User;

@Service
@Transactional
public class UserDao {
	@Autowired
    private SessionFactory sessionFactory;
    /**
     * 增加用户
     */
    
    public void addUser(String name,String pwd) {
        // TODO Auto-generated method stub
        Session session=sessionFactory.openSession();
        Transaction tx =session.beginTransaction();
        User user = new User(name, pwd);
        session.save(user);
        tx.commit();
		session.close();
        
    }
    
    public boolean findUser(String name,String pwd){
    	boolean has = false;
    	Session session= sessionFactory.openSession();
    	List catlist = null;
    	catlist =session.createQuery("from User").list();
    	Transaction tx =session.beginTransaction();
    	 if (catlist != null) {
    		 Iterator it= catlist.iterator();
    		 while (it.hasNext()) {
    			 User user =(User) it.next();
    			 if(user.getName().equals(name) &&user.getPwd().equals(pwd)) {
    				 has = true;
    		 break;
    			 };
    		 has= false;
    		 }}

    		tx.commit();
    		session.close();

 
       return has;
    }
    

}
